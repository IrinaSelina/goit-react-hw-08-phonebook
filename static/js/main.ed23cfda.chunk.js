(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{15:function(t,e,n){"use strict";var r=n(2),c=Object(r.b)("contact/fetchItemsRequest"),a=Object(r.b)("contact/fetchItemsSuccess"),o=Object(r.b)("contact/fetchItemsError"),u=Object(r.b)("contact/addItemRequest"),s=Object(r.b)("contact/addItemSuccess"),i=Object(r.b)("contact/addItemError"),b=Object(r.b)("contact/deleteItemRequest"),l=Object(r.b)("contact/deleteItemSuccess"),j=Object(r.b)("contact/deleteItemError"),d=Object(r.b)("contacts/Filter");e.a={addContactRequest:u,addContactSuccess:s,addContactError:i,deleteContactRequest:b,deleteContactSuccess:l,deleteContactError:j,fetchContactsRequest:c,fetchContactsSuccess:a,fetchContactsError:o,addFilter:d}},23:function(t,e,n){"use strict";var r=n(16),c=n.n(r),a=n(22),o=n(18),u=n.n(o),s=n(5),i=s.a.registerRequest,b=s.a.registerSuccess,l=s.a.registerError,j=s.a.loginRequest,d=s.a.loginSuccess,O=s.a.loginError,h=s.a.logoutRequest,f=s.a.logoutSuccess,g=s.a.logoutError,p=s.a.getCurrentUserRequest,x=s.a.getCurrentUserSuccess,m=s.a.getCurrentUserError;u.a.defaults.baseURL="https://connections-api.herokuapp.com";var v=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},k=function(){u.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i()),e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:r=e.sent,v(r.data.token),n(b(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(l(e.t0.massage));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(j()),e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:r=e.sent,v(r.data.token),n(d(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(O(e.t0.massage));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(h()),t.prev=1,t.next=4,u.a.post("/users/logout");case 4:k(),e(f()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(g(t.t0.massage));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),a=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return v(a),e(p()),t.prev=5,t.next=8,u.a.get("/users/current");case 8:o=t.sent,e(x(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(m(t.t0.massage));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}}},5:function(t,e,n){"use strict";var r=n(2),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),u=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),l=Object(r.b)("auth/logoutSuccess"),j=Object(r.b)("auth/logoutError"),d=Object(r.b)("auth/getCurrentUserRequest"),O=Object(r.b)("auth/getCurrentUserSuccess"),h=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:a,registerError:o,loginRequest:u,loginSuccess:s,loginError:i,logoutRequest:b,logoutSuccess:l,logoutError:j,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:h}},79:function(t,e,n){},80:function(t,e,n){"use strict";n.r(e);var r,c,a,o,u,s=n(0),i=n.n(s),b=n(24),l=n.n(b),j=n(8),d=n(46),O=n(33),h=n(34),f=n(36),g=n(35),p=n(6),x=n(23),m="/",v="/register",k="/login",y="/contacts",C=n(19),S=n(28),E=function(t){return t.auth.user.email},R=function(t){return t.auth.isLogin},q=n(1),A=["component","isAuthenticated","redirectTo"],U=Object(j.b)((function(t){return{isAuthenticated:R(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(S.a)(t,A);return Object(q.jsx)(p.b,Object(C.a)(Object(C.a)({},c),{},{render:function(t){return n?Object(q.jsx)(e,Object(C.a)({},t)):Object(q.jsx)(p.a,{to:r})}}))})),w=["component","isAuthenticated","redirectTo"],I=Object(j.b)((function(t){return{isAuthenticated:R(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(S.a)(t,w);return Object(q.jsx)(p.b,Object(C.a)(Object(C.a)({},c),{},{render:function(t){return n&&c.restricted?Object(q.jsx)(p.a,{to:r}):Object(q.jsx)(e,Object(C.a)({},t))}}))})),L=n(14),T={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},z=Object(j.b)((function(t){return{isAuthenticated:R(t)}}))((function(t){var e=t.isAuthenticated;return Object(q.jsxs)("nav",{children:[Object(q.jsx)(L.b,{to:"/",exact:!0,style:T.link,activeStyle:T.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(q.jsx)(L.b,{to:"/contacts",exact:!0,style:T.link,activeStyle:T.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})),F={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},B=function(){return Object(q.jsxs)("div",{children:[Object(q.jsx)(L.b,{to:"/register",exact:!0,style:F.link,activeStyle:F.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(q.jsx)(L.b,{to:"/login",exact:!0,style:F.link,activeStyle:F.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},W={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},D={logOut:x.a.logOut},G=Object(j.b)((function(t){return{email:E(t)}}),D)((function(t){var e=t.email,n=t.logOut;return Object(q.jsxs)("div",{style:W.container,children:[Object(q.jsxs)("span",{style:W.name,children:["Welcome, ",e]}),Object(q.jsx)("button",{onClick:n,type:"button",children:"\u0412\u044b\u0439\u0442\u0438"})]})})),J=Object(j.b)((function(t){return{isAuthenticated:R(t)}}),null)((function(t){var e=t.isAuthenticated;return Object(q.jsxs)("header",{children:[Object(q.jsx)(z,{}),e?Object(q.jsx)(G,{}):Object(q.jsx)(B,{})]})})),M=Object(s.lazy)((function(){return n.e(4).then(n.bind(null,85))})),H=Object(s.lazy)((function(){return n.e(5).then(n.bind(null,86))})),K=Object(s.lazy)((function(){return n.e(3).then(n.bind(null,88))})),N=Object(s.lazy)((function(){return n.e(6).then(n.bind(null,87))})),P=function(t){Object(f.a)(n,t);var e=Object(g.a)(n);function n(){return Object(O.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(J,{}),Object(q.jsx)(s.Suspense,{fallback:Object(q.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(q.jsxs)(p.d,{children:[Object(q.jsx)(I,{exact:!0,path:m,component:M}),Object(q.jsx)(I,{path:v,component:N,redirectTo:y,restricted:!0}),Object(q.jsx)(I,{path:k,component:H,redirectTo:y,restricted:!0}),Object(q.jsx)(U,{path:y,component:K,redirectTo:k}),Object(q.jsx)(p.b,{component:M})]})})]})}}]),n}(s.Component),Q={onGetCurrentUser:x.a.getCurrentUser},V=Object(j.b)(null,Q)(P),X=n(27),Y=n(2),Z=n(7),$=n(47),_=n.n($),tt=n(17),et=n(4),nt=n(15),rt=(nt.a.fetchContactsRequest,nt.a.fetchContactsSuccess),ct=(nt.a.fetchContactsError,nt.a.addContactRequest,nt.a.addContactSuccess),at=(nt.a.addContactError,nt.a.deleteContactRequest,nt.a.deleteContactSuccess),ot=(nt.a.deleteContactError,nt.a.addFilter),ut=Object(Y.c)([],(r={},Object(et.a)(r,rt,(function(t,e){return e.payload})),Object(et.a)(r,ct,(function(t,e){var n=e.payload;return[].concat(Object(X.a)(t),[n])})),Object(et.a)(r,at,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),st=Object(Y.c)("",Object(et.a)({},ot,(function(t,e){return e.payload}))),it=Object(Z.b)({items:ut,filter:st}),bt=n(5),lt=(bt.a.registerRequest,bt.a.registerSuccess),jt=bt.a.registerError,dt=(bt.a.loginRequest,bt.a.loginSuccess),Ot=bt.a.loginError,ht=(bt.a.logoutRequest,bt.a.logoutSuccess),ft=bt.a.logoutError,gt=(bt.a.getCurrentUserRequest,bt.a.getCurrentUserSuccess),pt=bt.a.getCurrentUserError,xt={name:null,email:null},mt=Object(Y.c)(xt,(c={},Object(et.a)(c,lt,(function(t,e){return e.payload.user})),Object(et.a)(c,dt,(function(t,e){return e.payload.user})),Object(et.a)(c,ht,(function(){return xt})),Object(et.a)(c,gt,(function(t,e){return e.payload})),c)),vt=Object(Y.c)(null,(a={},Object(et.a)(a,lt,(function(t,e){return e.payload.token})),Object(et.a)(a,dt,(function(t,e){return e.payload.token})),Object(et.a)(a,ht,(function(){return null})),a)),kt=Object(Y.c)(null,(o={},Object(et.a)(o,jt,(function(t,e){return e.payload})),Object(et.a)(o,Ot,(function(t,e){return e.payload})),Object(et.a)(o,ft,(function(t,e){return e.payload})),Object(et.a)(o,pt,(function(t,e){return e.payload})),o)),yt=Object(Y.c)(!1,(u={},Object(et.a)(u,lt,(function(){return!0})),Object(et.a)(u,dt,(function(){return!0})),Object(et.a)(u,gt,(function(){return!0})),Object(et.a)(u,ht,(function(){return!1})),Object(et.a)(u,jt,(function(){return!1})),Object(et.a)(u,Ot,(function(){return!1})),Object(et.a)(u,pt,(function(){return!1})),u)),Ct=Object(Z.b)({user:mt,token:vt,error:kt,isLogin:yt}),St=n(48),Et=n.n(St),Rt=[].concat(Object(X.a)(Object(Y.d)({serializableCheck:{ignoredActions:[tt.a,tt.f,tt.b,tt.c,tt.d,tt.e]}})),[_.a]),qt={key:"auth",storage:Et.a,whitelist:["token"]},At=Object(Z.b)({auth:Object(tt.g)(qt,Ct),contacts:it}),Ut=Object(Y.a)({reducer:At,middleware:Rt,devTools:!1}),wt={store:Ut,persistor:Object(tt.h)(Ut)};n(79);l.a.render(Object(q.jsx)(i.a.StrictMode,{children:Object(q.jsx)(L.a,{children:Object(q.jsx)(j.a,{store:wt.store,children:Object(q.jsx)(d.a,{loading:null,persistor:wt.persistor,children:Object(q.jsx)(V,{})})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.ed23cfda.chunk.js.map