(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{106:function(t,e,r){},107:function(t,e,r){"use strict";r.r(e);var n,c,a,o,u,s=r(0),i=r.n(s),b=r(28),j=r.n(b),l=r(14),O=r(65),d=r(51),h=r(52),f=r(54),p=r(53),g=r(7),x=r(39),m="/",v="/register",C="/login",k="/contacts",y=r(30),S=r(46),E=function(t){return t.auth.user.email},R=function(t){return t.auth.isLogin},q=r(2),w=["component","isAuthenticated","redirectTo"],U=Object(l.b)((function(t){return{isAuthenticated:R(t)}}))((function(t){var e=t.component,r=t.isAuthenticated,n=t.redirectTo,c=Object(S.a)(t,w);return Object(q.jsx)(g.b,Object(y.a)(Object(y.a)({},c),{},{render:function(t){return r?Object(q.jsx)(e,Object(y.a)({},t)):Object(q.jsx)(g.a,{to:n})}}))})),A=["component","isAuthenticated","redirectTo"],I=Object(l.b)((function(t){return{isAuthenticated:R(t)}}))((function(t){var e=t.component,r=t.isAuthenticated,n=t.redirectTo,c=Object(S.a)(t,A);return Object(q.jsx)(g.b,Object(y.a)(Object(y.a)({},c),{},{render:function(t){return r&&c.restricted?Object(q.jsx)(g.a,{to:n}):Object(q.jsx)(e,Object(y.a)({},t))}}))})),T=r(21),z=Object(l.b)((function(t){return{isAuthenticated:R(t)}}))((function(t){var e=t.isAuthenticated;return Object(q.jsxs)("nav",{children:[Object(q.jsx)(T.b,{to:"/",exact:!0,className:"link",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(q.jsx)(T.b,{to:"/contacts",exact:!0,className:"link",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})),F=function(){return Object(q.jsxs)("div",{children:[Object(q.jsx)(T.b,{to:"/register",exact:!0,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(q.jsx)(T.b,{to:"/login",exact:!0,children:"\u041b\u043e\u0433\u0438\u043d"})]})},N=r(133),G=r(66),L=r.n(G),P={logOut:x.a.logOut},B=Object(l.b)((function(t){return{email:E(t)}}),P)((function(t){var e=t.email,r=t.logOut;return Object(q.jsxs)("div",{children:[Object(q.jsxs)("span",{children:["Welcome, ",e]}),Object(q.jsx)(N.a,{onClick:r,type:"button",children:Object(q.jsx)(L.a,{})})]})})),J=r(131),M=r(132),D=r(130),W=Object(D.a)((function(t){return{root:{flexGrow:1},menu:{justifyContent:"space-between"}}})),H=Object(l.b)((function(t){return{isAuthenticated:R(t)}}),null)((function(t){var e=t.isAuthenticated,r=W();return Object(q.jsx)("div",{className:r.root,children:Object(q.jsx)(J.a,{position:"static",children:Object(q.jsxs)(M.a,{className:r.menu,color:"white",children:[Object(q.jsx)(z,{color:"inherit"}),e?Object(q.jsx)(B,{color:"inherit"}):Object(q.jsx)(F,{color:"inherit"})]})})})})),K=Object(s.lazy)((function(){return r.e(7).then(r.bind(null,154))})),Q=Object(s.lazy)((function(){return Promise.all([r.e(0),r.e(5)]).then(r.bind(null,155))})),V=Object(s.lazy)((function(){return Promise.all([r.e(0),r.e(4)]).then(r.bind(null,158))})),X=Object(s.lazy)((function(){return Promise.all([r.e(0),r.e(6)]).then(r.bind(null,157))})),Y=function(t){Object(f.a)(r,t);var e=Object(p.a)(r);function r(){return Object(d.a)(this,r),e.apply(this,arguments)}return Object(h.a)(r,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(H,{}),Object(q.jsx)(s.Suspense,{fallback:Object(q.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(q.jsxs)(g.d,{children:[Object(q.jsx)(I,{exact:!0,path:m,component:K}),Object(q.jsx)(I,{path:v,component:X,redirectTo:k,restricted:!0}),Object(q.jsx)(I,{path:C,component:Q,redirectTo:k,restricted:!0}),Object(q.jsx)(U,{path:k,component:V,redirectTo:C}),Object(q.jsx)(g.b,{component:K})]})})]})}}]),r}(s.Component),Z={onGetCurrentUser:x.a.getCurrentUser},$=Object(l.b)(null,Z)(Y),_=r(45),tt=r(3),et=r(11),rt=r(67),nt=r.n(rt),ct=r(27),at=r(5),ot=r(22),ut=(ot.a.fetchContactsRequest,ot.a.fetchContactsSuccess),st=(ot.a.fetchContactsError,ot.a.addContactRequest,ot.a.addContactSuccess),it=(ot.a.addContactError,ot.a.deleteContactRequest,ot.a.deleteContactSuccess),bt=(ot.a.deleteContactError,ot.a.addFilter),jt=Object(tt.c)([],(n={},Object(at.a)(n,ut,(function(t,e){return e.payload})),Object(at.a)(n,st,(function(t,e){var r=e.payload;return[].concat(Object(_.a)(t),[r])})),Object(at.a)(n,it,(function(t,e){var r=e.payload;return t.filter((function(t){return t.id!==r}))})),n)),lt=Object(tt.c)("",Object(at.a)({},bt,(function(t,e){return e.payload}))),Ot=Object(et.b)({items:jt,filter:lt}),dt=r(6),ht=(dt.a.registerRequest,dt.a.registerSuccess),ft=dt.a.registerError,pt=(dt.a.loginRequest,dt.a.loginSuccess),gt=dt.a.loginError,xt=(dt.a.logoutRequest,dt.a.logoutSuccess),mt=dt.a.logoutError,vt=(dt.a.getCurrentUserRequest,dt.a.getCurrentUserSuccess),Ct=dt.a.getCurrentUserError,kt={name:null,email:null},yt=Object(tt.c)(kt,(c={},Object(at.a)(c,ht,(function(t,e){return e.payload.user})),Object(at.a)(c,pt,(function(t,e){return e.payload.user})),Object(at.a)(c,xt,(function(){return kt})),Object(at.a)(c,vt,(function(t,e){return e.payload})),c)),St=Object(tt.c)(null,(a={},Object(at.a)(a,ht,(function(t,e){return e.payload.token})),Object(at.a)(a,pt,(function(t,e){return e.payload.token})),Object(at.a)(a,xt,(function(){return null})),a)),Et=Object(tt.c)(null,(o={},Object(at.a)(o,ft,(function(t,e){return e.payload})),Object(at.a)(o,gt,(function(t,e){return e.payload})),Object(at.a)(o,mt,(function(t,e){return e.payload})),Object(at.a)(o,Ct,(function(t,e){return e.payload})),o)),Rt=Object(tt.c)(!1,(u={},Object(at.a)(u,ht,(function(){return!0})),Object(at.a)(u,pt,(function(){return!0})),Object(at.a)(u,vt,(function(){return!0})),Object(at.a)(u,xt,(function(){return!1})),Object(at.a)(u,ft,(function(){return!1})),Object(at.a)(u,gt,(function(){return!1})),Object(at.a)(u,Ct,(function(){return!1})),u)),qt=Object(et.b)({user:yt,token:St,error:Et,isLogin:Rt}),wt=r(68),Ut=r.n(wt),At=[].concat(Object(_.a)(Object(tt.d)({serializableCheck:{ignoredActions:[ct.a,ct.f,ct.b,ct.c,ct.d,ct.e]}})),[nt.a]),It={key:"auth",storage:Ut.a,whitelist:["token"]},Tt=Object(et.b)({auth:Object(ct.g)(It,qt),contacts:Ot}),zt=Object(tt.a)({reducer:Tt,middleware:At,devTools:!1}),Ft={store:zt,persistor:Object(ct.h)(zt)};r(106);j.a.render(Object(q.jsx)(i.a.StrictMode,{children:Object(q.jsx)(T.a,{children:Object(q.jsx)(l.a,{store:Ft.store,children:Object(q.jsx)(O.a,{loading:null,persistor:Ft.persistor,children:Object(q.jsx)($,{})})})})}),document.getElementById("root"))},22:function(t,e,r){"use strict";var n=r(3),c=Object(n.b)("contact/fetchItemsRequest"),a=Object(n.b)("contact/fetchItemsSuccess"),o=Object(n.b)("contact/fetchItemsError"),u=Object(n.b)("contact/addItemRequest"),s=Object(n.b)("contact/addItemSuccess"),i=Object(n.b)("contact/addItemError"),b=Object(n.b)("contact/deleteItemRequest"),j=Object(n.b)("contact/deleteItemSuccess"),l=Object(n.b)("contact/deleteItemError"),O=Object(n.b)("contacts/Filter");e.a={addContactRequest:u,addContactSuccess:s,addContactError:i,deleteContactRequest:b,deleteContactSuccess:j,deleteContactError:l,fetchContactsRequest:c,fetchContactsSuccess:a,fetchContactsError:o,addFilter:O}},39:function(t,e,r){"use strict";var n=r(26),c=r.n(n),a=r(36),o=r(29),u=r.n(o),s=r(6),i=s.a.registerRequest,b=s.a.registerSuccess,j=s.a.registerError,l=s.a.loginRequest,O=s.a.loginSuccess,d=s.a.loginError,h=s.a.logoutRequest,f=s.a.logoutSuccess,p=s.a.logoutError,g=s.a.getCurrentUserRequest,x=s.a.getCurrentUserSuccess,m=s.a.getCurrentUserError;u.a.defaults.baseURL="https://connections-api.herokuapp.com";var v=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},C=function(){u.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(i()),e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:n=e.sent,v(n.data.token),r(b(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(j(e.t0.massage));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(l()),e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:n=e.sent,v(n.data.token),r(O(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(d(e.t0.massage));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(h()),t.prev=1,t.next=4,u.a.post("/users/logout");case 4:C(),e(f()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(p(t.t0.massage));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,r){var n,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r(),a=n.auth.token){t.next=3;break}return t.abrupt("return");case 3:return v(a),e(g()),t.prev=5,t.next=8,u.a.get("/users/current");case 8:o=t.sent,e(x(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(m(t.t0.massage));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,r){return t.apply(this,arguments)}}()}}},6:function(t,e,r){"use strict";var n=r(3),c=Object(n.b)("auth/registerRequest"),a=Object(n.b)("auth/registerSuccess"),o=Object(n.b)("auth/registerError"),u=Object(n.b)("auth/loginRequest"),s=Object(n.b)("auth/loginSuccess"),i=Object(n.b)("auth/loginError"),b=Object(n.b)("auth/logoutRequest"),j=Object(n.b)("auth/logoutSuccess"),l=Object(n.b)("auth/logoutError"),O=Object(n.b)("auth/getCurrentUserRequest"),d=Object(n.b)("auth/getCurrentUserSuccess"),h=Object(n.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:a,registerError:o,loginRequest:u,loginSuccess:s,loginError:i,logoutRequest:b,logoutSuccess:j,logoutError:l,getCurrentUserRequest:O,getCurrentUserSuccess:d,getCurrentUserError:h}}},[[107,2,3]]]);
//# sourceMappingURL=main.7f5e2db6.chunk.js.map